<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KidsLearn | Home</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">


<style>
  body { font-family: 'Nunito', sans-serif; background: linear-gradient(to right,#00c6ff,#0072ff); color:#333; margin:0; padding:0;}
  .navbar { display:flex; justify-content:space-between; align-items:center; padding:12px 20px; background:#1e3c72; color:#fff; position:sticky; top:0; z-index:1000; border-bottom:4px solid #00bfff;}
  .navbar .logo { display:flex; align-items:center; font-size:26px; font-family:'Fredoka One', cursive;}
  .navbar .logo i { margin-right:10px; font-size:30px;}
  .navbar nav a { margin:0 10px; text-decoration:none; color:#fff; font-weight:700; transition: transform 0.2s; }
  .navbar nav a:hover { transform: scale(1.1); }
  .container { max-width:1200px; margin:40px auto; padding:0 20px; }
  .welcome { font-size:24px; color:#fff; margin-bottom:20px; }
</style>
</head>
<body>

<header class="navbar">
  <div class="logo"><i class="fas fa-rocket"></i><span>KidsLearn</span></div>
  <nav>
    <a href="homepage.html">Home</a>
    <a href="chat.html">Chat</a>
    <a href="profile.html">Profile</a>
    <a href="/logout" id="logoutBtn">Logout</a>
  </nav>
</header>

<div class="container">
  <h1 class="welcome" id="welcomeMessage">Welcome!</h1>
  <p>This is your homepage content.</p>
</div>

<script>
async function fetchCurrentUser() {
  try {
    const res = await fetch('/current-user');
    if (!res.ok) throw new Error('Not logged in');
    const user = await res.json();
    if (!user || !user._id) throw new Error('Not logged in');
    document.getElementById('welcomeMessage').textContent = `Welcome, ${user.name}!`;
  } catch(err) {
    console.error(err);
    alert('You are not logged in! Redirecting to login page.');
    window.location.href = '/login.html';
  }
}

// Logout button
document.getElementById('logoutBtn').addEventListener('click', async (e) => {
  e.preventDefault();
  try {
    await fetch('/logout');
    window.location.href = '/login.html';
  } catch(err) {
    console.error(err);
    alert('Logout failed');
  }
});

fetchCurrentUser();
</script>
</body>
</html>
